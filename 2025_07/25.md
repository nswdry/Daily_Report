# 2025年7月25日(金)

# やったこと📝

- [プラクティス SSH の基本を理解する（Reスキル） \| FBC](https://bootcamp.fjord.jp/practices/305)
  - [sshd\_config\(5\) manページ](https://nxmnpg.lemoda.net/ja/5/sshd_config)
  - [公開鍵認証編～サーバーへの接続を制限しよう～ – Linuxセキュリティ入門\(3\) \| さくらのナレッジ](https://knowledge.sakura.ad.jp/22550/)

# わかったこと💡

## スーパーユーザーでのログインを禁止する

[sshd\_config\(5\) manページ](https://nxmnpg.lemoda.net/ja/5/sshd_config)で`root`と検索をかけると、 **PermitRootLogin (root ログイン許可)** が出てくるので、これを参考にrootでのログインを禁止にする。

 ### PermitRootLoginのオプション

|         設定         |                                            説明                                            |
| :------------------: | :----------------------------------------------------------------------------------------: |
|    no   |                      rootユーザーのSSHログインを完全に禁止する　**☆安全**                       |
|         yes          |                    rootユーザーのすべての認証方法でのログインを許可する                    |
|   without-password   |                 rootユーザーのパスワード認証ではログインできないようにする                 |
| forced-commands-only | rootユーザーは特定のコマンドのみ実行できる場合に限り、公開鍵認証でログインできるようにする |
|prohibit-password| パスワード認証によるrootログインは禁止、ただし公開鍵認証などは許可 |

また、`ChallengeResponseAuthentication`の設定が`yes`であった場合、`PermitRootLogin`の設定が`without-password`になっていてもrootユーザーはパスワード認証でログインできてしまう可能性がある。
`ChallengeResponseAuthentication`のデフォルト値は`yes`のため、`no`に変更する。

## パスワード認証方式でのログインを禁止する

[sshd\_config\(5\) manページ](https://nxmnpg.lemoda.net/ja/5/sshd_config)で`Authentication`と検索をかけると**PasswordAuthentication**が見つかる。

デフォルトでは`yes`でパスワード認証が許可されているため、`no`に変更するとパスワード認証方式を拒否できるが、`ChallengeResponseAuthentication`が`yes`の場合、パスワード認証が許可されてしまうことがある。

## 公開鍵認証方式でのログイン

> 接続時に使われる認証方式はある定められた順番にしたがって決定されるようになっています。

`PreferredAuthentications`より、デフォルトでの順番は以下の通りです。

1. hostbased
2. publickey
3. keyboard-interactive
4. password



# 次にやること✅

- [プラクティス SSH の基本を理解する（Reスキル） \| FBC](https://bootcamp.fjord.jp/practices/305)

# いまの気持ち🫶

`man`コマンドを実行するたび、これめちゃくちゃ英語力が必要なのでは…？となって、プログラミングの勉強だけでなく、英語の勉強もしっかり頑張る必要があることに気づきました。実際日本語のドキュメントと英語のドキュメントだと理解度に大分差が出てしまっているので、並行して英語も学んでいけるよう頑張りたいと思いました。

とりあえずrootログインは禁止にできましたので、22番ポートでのアクセス失敗とrootログイン失敗のスクリーンショットが撮れました！
明日はいよいよ公開鍵認証へチャレンジしていきたいと思います〜！！！

# 勉強時間

5時間(合計: 402時間15分)
