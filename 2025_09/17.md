# 2025年9月17日(水)

# やったこと📝

- [プラクティス プログラムの修正（リバーシ編）（Reスキル） \| FBC](https://bootcamp.fjord.jp/practices/321)

# わかったこと💡
:::details 残りのエラーたち
## 1つ目のエラー

```ruby
# エラーメッセージ
ReversiMethodsTest test_cannot_put_stone [test/reversi_methods_test.rb:73]:
Expected true to not be truthy.

# エラーが発生したテスト部分
def test_cannot_put_stone
    initial_data = <<~BOARD
      W-WWWW--
      W-BWWW--
      WBWWWWW-
      WWBWWW--
      WBBBBB--
      --B-----
      --B-----
      --B-----
    BOARD
    board = build_board(initial_data)
    refute put_stone(board, 'b1', BLACK_STONE) # ココ！
    assert_equal build_board(initial_data), board
  end
````
refute put_stone(board, 'b1', BLACK_STONE)`はb1に黒石が置けないことを期待したのに、置けた(=true)と判定されてしまったということになります。
## ２つ目のエラー
```ruby
# エラーメッセージ
ReversiMethodsTest test_finished_of_full_board [test/reversi_methods_test.rb:107]:
Expected false to be truthy.


# エラーが発生したテスト部分
def test_finished_of_full_board
    assert finished?(build_board(<<~BOARD)) # ココ！
      WWWWWWWW
      WBBWWBWB
      WBBBBWBB
      WBWBBBBB
      WBWWBBBB
      WBWWWBBB
      WWWWWWBB
      WBBBBBBB
    BOARD
  end
```
全てのマスが埋まっている状況でゲームが終了と判定されると想定された(=truthy)が、終了しなかった(=false)

## 3つ目のエラー
```ruby
# エラーメッセージ
ReversiMethodsTest test_finished_of_quickest_win_board [test/reversi_methods_test.rb:120]:
Expected false to be truthy.

# エラーが発生したテスト部分
def test_finished_of_quickest_win_board
    assert finished?(build_board(<<~BOARD)) # ココ！
      --------
      ---W----
      ---WW---
      -WWWWW--
      ---WWW--
      ---WWW--
      --------
      --------
    BOARD
    assert finished?(build_board(<<~BOARD)) # 黒最短勝利
      --------
      --------
      ----B---
      ---BBB--
      --BBBBB-
      ---BBB--
      ----B---
      --------
    BOARD
  end
```
盤上に白石しか置かれていない状況で白の最短勝利となりゲームが終了するはず(=truthy)だったが、終了しなかった(=false)

まず気になったのが、3つ目のエラーで、白石の場合にはエラーが出ていますが、黒石の方のエラーメッセージは出てきていないということです。調べてみると、テストは失敗した時点で止まり、黒石の方まで処理が進んでいない→黒石の終了条件でも同様に失敗している可能性が高いと考えました。ちなみに黒石のテストも確認したい場合はメソッドを分ければ可能だそうです。
:::

## 特定の一つのテストだけ実行したい
[プラクティス プログラムの修正（リバーシ編）（Reスキル） \| FBC](https://bootcamp.fjord.jp/practices/321)より、
```ruby
# test_invalid_position のテストだけ実行する
$ ruby test/reversi_methods_test.rb -n test_invalid_position
```
試しに先ほどの黒石の判定もエラーが出るか確かめたいので、メソッドを分割し、テストを走らせてみます。

```ruby
  def test_finished_of_quickest_win_board_with_black
    assert finished?(build_board(<<~BOARD)) # 黒最短勝利
      --------
      --------
      ----B---
      ---BBB--
      --BBBBB-
      ---BBB--
      ----B---
      --------
    BOARD
  end

$  ruby test/reversi_methods_test.rb -n test_finished_of_quickest_win_board_with_black

# 実行結果
  1) Failure:
ReversiMethodsTest test_finished_of_quickest_win_board_with_black [test/reversi_methods_test.rb:132]:
Expected false to be truthy.

1 runs, 1 assertions, 1 failures, 0 errors, 0 skips
```
ちゃんと失敗していますね！白石も黒石も同様に最短勝利の場合に終了していないという結果でした。

# 次にやること✅

- [プラクティス プログラムの修正（リバーシ編）（Reスキル） \| FBC](https://bootcamp.fjord.jp/practices/321)

# いまの気持ち🫶

テスト部分ではなく、メソッド側にブレークポイントを置いていたので正直よくわからないなと思っていたのですが、やっとステップインの意味がわかりました。メソッドの中に入っていける便利さを身に沁みています…

# 学習時間

- 3時間(合計: 539時間30分)
