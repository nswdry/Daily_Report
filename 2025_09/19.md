# 2025年9月19日(金)

# やったこと📝

- [プラクティス プログラムの修正（リバーシ編）（Reスキル） \| FBC](https://bootcamp.fjord.jp/practices/321)
  - [制御構造 \(Ruby 3\.4 リファレンスマニュアル\)](https://docs.ruby-lang.org/ja/latest/doc/spec=2fcontrol.html#return)

# わかったこと💡
## return
式の値を戻り値としてメソッドの実行を終了します。式が2つ以上与えられた時には、それらを要素とする配列をメソッドの戻り値とします。式が省略された場合には nil を戻り値とします。
引用：[制御構造 \(Ruby 3\.4 リファレンスマニュアル\)](https://docs.ruby-lang.org/ja/latest/doc/spec=2fcontrol.html#return)

## return true if 条件
- 条件が`true`のときだけ`return true`が実行され、メソッドを終了
条件が`false`のときは `return`自体が実行されない（＝次の処理に進む）

これが影響したのか、以下の部分で何もってこずにboardだけを返してくれる状況がありました。
:::details プログラムの修正
```ruby
(ruby) placeable?(board, WHITE_STONE)
true
(rdbg) board
[["W", "W", "W", "W", "W", "W", "W", "B"],
 ["W", "B", "B", "W", "W", "B", "W", "B"],
 ["W", "B", "B", "B", "B", "W", "B", "B"],
 ["W", "B", "W", "B", "B", "B", "B", "-"],
 ["W", "B", "W", "W", "B", "B", "B", "B"],
 ["W", "B", "W", "W", "W", "B", "B", "B"],
 ["W", "W", "W", "W", "B", "W", "B", "B"],
 ["W", "B", "B", "B", "B", "B", "B", "B"]]
(ruby) placeable?(board, BLACK_STONE)
[["W", "W", "W", "W", "W", "W", "W", "B"],
 ["W", "B", "B", "W", "W", "B", "W", "B"],
 ["W", "B", "B", "B", "B", "W", "B", "B"],
 ["W", "B", "W", "B", "B", "B", "B", "-"],
 ["W", "B", "W", "W", "B", "B", "B", "B"],
 ["W", "B", "W", "W", "W", "B", "B", "B"],
 ["W", "W", "W", "W", "B", "W", "B", "B"],
 ["W", "B", "B", "B", "B", "B", "B", "B"]]
```
白石は`true`と返ってきますが、黒石は何も返さずボードを返してくれました。

```ruby
# この部分
return true if put_stone(board, position.to_cell_ref, attack_stone_color, dry_run: true)
```
上記のコードは、`put_stone`ががtrueの場合にtrueを返してメソッドを即終了し、falseの場合は次の処理に進みます。このときfalseは返しません。どうやら最後まで`true`を引かなければ`nil`を返して終了するようです。

石を置けるなら`true`、置けないなら `false`という仕様にしたいなら、メソッドの最後に`false`を明示的に書く必要があるそうです。
:::

## テスト結果
```ruby
# Running:

....F

Failure:
ReversiMethodsTest test_finished_of_quickest_win_board [test/reversi_methods_test.rb:121]:
Expected false to be truthy.


rails test test/reversi_methods_test.rb:120

F

Failure:
ReversiMethodsTest test_cannot_put_stone [test/reversi_methods_test.rb:74]:
Expected true to not be truthy.


rails test test/reversi_methods_test.rb:62

...

Finished in 0.003693s, 2437.0431 runs/s, 4332.5210 assertions/s.
9 runs, 16 assertions, 2 failures, 0 errors, 0 skips
```
そしてテスト失敗が残り2個になりました。

# 次にやること✅

- [プラクティス プログラムの修正（リバーシ編）（Reスキル） \| FBC](https://bootcamp.fjord.jp/practices/321)

# いまの気持ち🫶

段々だんだんコードの意味は少しずつ理解できてきて嬉しいです！新しいコードを読むことになるとまたわからない〜ってなるのでしょうが、数日前には全く意味のわからなかったコードの意味が少しずつ読めるようになってきて成長を感じました。

# 学習時間

- 2時間30分(合計: 545時間15分)
