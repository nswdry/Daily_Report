# 2025å¹´9æœˆ24æ—¥(æ°´)

# ã‚„ã£ãŸã“ã¨ðŸ“

- [ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ä¿®æ­£ï¼ˆãƒªãƒãƒ¼ã‚·ç·¨ï¼‰ï¼ˆReã‚¹ã‚­ãƒ«ï¼‰ \| FBC](https://bootcamp.fjord.jp/practices/321)

# ã‚ã‹ã£ãŸã“ã¨ðŸ’¡

## æ®‹ã‚Šã®ã‚¨ãƒ©ãƒ¼ã«ã¤ã„ã¦
:::details ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ä¿®æ­£
```ruby
F
Failure:ReversiMethodsTest#test_cannot_put_stone [test/reversi_methods_test.rb:73]:Expected true to not be truthy.

rails test test/reversi_methods_test.rb:61
F
Failure:ReversiMethodsTest#test_finished_of_full_board [test/reversi_methods_test.rb:107]:Expected false to be truthy.
```
ä»Šæ®‹ã£ã¦ã„ã‚‹ã‚¨ãƒ©ãƒ¼ã¯æ®‹ã‚Šï¼’ã¤ã§ã™ã€‚ä¸¡æ–¹ã¨ã‚‚ç½®ã‘ãªã„ã¯ãšã®å ´æ‰€ã§ç½®ã‘ã‚‹ã¨åˆ¤æ–­ã•ã‚Œã¦ã—ã¾ã£ã¦ã„ã¾ã™ã€‚
åŽŸå› ã¨ã—ã¦è€ƒãˆã‚‰ã‚Œã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã®ã†ã¡ã€`turn`ãƒ¡ã‚½ãƒƒãƒ‰ãŒãªã‚“ã¨ãªãæ€ªã—ãã†ãªæ°—ãŒã™ã‚‹ã®ã§ã€ãã“ã‚’è¦‹ã¦ã¿ã¾ã—ãŸã€‚
```rubyÂ  
  def turn(board, target_pos, attack_stone_color, direction)
    return false if target_pos.out_of_board?
    return false if target_pos.stone_color(board) == attack_stone_color

    next_pos = target_pos.next_position(direction)
    if (next_pos.stone_color(board) == attack_stone_color) || turn(board, next_pos, attack_stone_color, direction)
      board[target_pos.row][target_pos.col] = attack_stone_color
      true
    else
      false
    end
  end
```
ã¾ãšä¸Šè¨˜2è¡Œã§æ¡ä»¶åˆ†å²ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚ç›¤ä¸Šå¤–ã®å ´åˆã¨ã€æ”»æ’ƒå´ã®è‰²ã¨éš£ã‚Šåˆã†çŸ³ãŒå…¨ã¦åŒè‰²ã ã£ãŸå ´åˆã¯falseã‚’è¿”ã—ã¦çµ‚äº†ã—ã¾ã™ã€‚â†’ã“ã®å…ˆã¯ã‚‚ã†è£è¿”ã›ãªã„ã¨ã„ã†æ¡ä»¶ã§å‡¦ç†ã‚’çµ‚äº†ã™ã‚‹ãŸã‚ã®æ¡ä»¶ã€‚
```rubyÂ  
   return false if target_pos.out_of_board?
   return false if target_pos.stone_color(board) == attack_stone_color
```

- `binding.break`ã‚’è¨­ç½®ã—ã¦`ruby test/reversi_methods_test.rb`ã‚’å®Ÿè¡Œã—ã¾ã™
- ç¾åœ¨ã®å¤‰æ•°ã‚’ç¢ºèªã—ã¾ã™Â 
- `target_pos.row, target_pos.col, target_pos.stone_color(board), attack_stone_color, direction`ãªã©ã®ä¸­èº«ã‚’è¦‹ã¾ã™
- ã‚¹ãƒ†ãƒƒãƒ—ã‚¤ãƒ³(step)/ã‚¹ãƒ†ãƒƒãƒ—ã‚ªãƒ¼ãƒãƒ¼(next)ã§æ¬¡ã«é€²ã‚€
:::
## ãƒ‡ãƒãƒƒã‚°ã‚³ãƒžãƒ³ãƒ‰
|ã‚³ãƒžãƒ³ãƒ‰|ä½¿ã„ã©ã“ã‚|
|---|---|
| step(ã‚¹ãƒ†ãƒƒãƒ—ã‚¤ãƒ³)| ãƒ¡ã‚½ãƒƒãƒ‰ã®ä¸­ã«ã‚‚å…¥ã‚‹ã€‚é–¢æ•°ã®ä¸­èº«ã‚’ç¢ºèªã—ãŸã„ã¨ãã«ä½¿ã†|
| next(ã‚¹ãƒ†ãƒƒãƒ—ã‚ªãƒ¼ãƒãƒ¼)| æ¬¡ã®è¡Œã¾ã§é€²ã¿ã€é–¢æ•°ã®å†…éƒ¨ã«ã¯å…¥ã‚‰ãªã„| | step out(ã‚¹ãƒ†ãƒƒãƒ—ã‚¢ã‚¦ãƒˆ| ç¾åœ¨ã®é–¢æ•°ã®æ®‹ã‚Šã‚’å®Ÿè¡Œã—ã¦ã€å‘¼ã³å‡ºã—å…ƒã«æˆ»ã‚‹|
 | continue| ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆã§æ­¢ã¾ã£ãŸå ´æ‰€ã‹ã‚‰æ¬¡ã®åœæ­¢ç‚¹ã¾ã§ä¸€æ°—ã«å®Ÿè¡Œã™ã‚‹| 

:::details ãƒ‡ãƒãƒƒã‚°ä¸­â€¦

```ruby
    63|   def turn(board, target_pos, attack_stone_color, direction)
    64|     binding.break
    65|     return false if target_pos.out_of_board?
=>  66|     return false if target_pos.stone_color(board) == BLANK_CELL
    67|     return false if target_pos.stone_color(board) == attack_stone_color
    68| 
    69|     next_pos = target_pos.next_position(direction)
    70|     if (next_pos.stone_color(board) == attack_stone_color) || turn(board, next_pos, attack_stone_color, direction)
=>#0    ReversiMethods#turn(board=[["W", "W", "W", "W", "W", "W", "W", "B"..., target_pos=#<Position:0x000000011c5e6718 @col=5, @ro..., attack_stone_color="W", direction=:top_left) at ~/Desktop/bug_reversi/lib/reversi_methods.rb:66
  #1    ReversiMethods#turn(board=[["W", "W", "W", "W", "W", "W", "W", "B"..., target_pos=#<Position:0x000000011c524b68 @col=6, @ro..., attack_stone_color="W", direction=:top_left) at ~/Desktop/bug_reversi/lib/reversi_methods.rb:70
  # and 30 frames (use `bt' command for all frames)
(ruby) target_pos.stone_color(board)
"B"
(ruby) attack_stone_color
"W"
(rdbg) direction
:top
```
:::
æ¡ä»¶åˆ†å²æ™‚ç‚¹ã§éš£ã‚Šåˆã†ã‚»ãƒ«ãŒç©ºç™½ã®å ´åˆã¯ãã®ã¾ã¾å‡¦ç†ãŒé€²ã‚“ã§ã„ã£ã¦ã—ã¾ã£ã¦ã„ãŸã®ã§ã€ãã“ã‚’ä¿®æ­£ã—ã¦å†åº¦ãƒ†ã‚¹ãƒˆã‚’é€šã—ã¦ã¿ã¾ã—ãŸã€‚

```ruby
# Running:

.........

Finished in 0.025977s, 346.4603 runs/s, 692.9207 assertions/s.

9 runs, 18 assertions, 0 failures, 0 errors, 0 skips
```

 ã¨ã‚Šã‚ãˆãšå…¨ã¦ã‚¨ãƒ©ãƒ¼ãŒæ¶ˆãˆã¾ã—ãŸã­ï¼ï¼
# æ¬¡ã«ã‚„ã‚‹ã“ã¨âœ…

- [ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ä¿®æ­£ï¼ˆãƒªãƒãƒ¼ã‚·ç·¨ï¼‰ï¼ˆReã‚¹ã‚­ãƒ«ï¼‰ \| FBC](https://bootcamp.fjord.jp/practices/321)

# ã„ã¾ã®æ°—æŒã¡ðŸ«¶

ä¸Šè¨˜ã®ãƒ‡ãƒãƒƒã‚°ã®åŸºæœ¬ã‚’å­¦ã³ç›´ã—ã¦ã€ã‚ˆã†ã‚„ãã©ã“ã«é£›ã‚“ã§ã„ãã®ã‹ç†è§£ã§ãã¾ã—ãŸã€‚æ€¥ã«æ„å‘³ä¸æ˜Žãªã¨ã“ã‚ã«é£›ã‚“ã§ã„ãã®ã§å…¨ç„¶æ“ä½œãŒã‚ã‹ã‚‰ãªãã¦å›°æƒ‘ã—ãŸè¦šãˆãŒã‚ã‚Šã¾ã™ã€‚

ã¨ã‚Šã‚ãˆãšä¸€æ—¦ã‚¨ãƒ©ãƒ¼ãŒæ¶ˆãˆã¦ãã‚ŒãŸã®ã§æ˜Žæ—¥ã¯ã¾ã¨ã‚ã¦æå‡ºã—ãŸã„ã¨æ€ã„ã¾ã™ï¼é•·ã„æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã—ãŸãŒã€ãªã‚“ã¨ã‹ã‚¨ãƒ©ãƒ¼ãŒæ¶ˆãˆã¦ãã‚Œã¾ã—ãŸã€‚ä¿®æ­£æ–¹æ³•ãŒåˆã£ã¦ã„ã‚‹ã‹ã©ã†ã‹ã®è‡ªä¿¡ã¯ãªã„ã§ã™ãŒã€ã¨ã‚Šã‚ãˆãšä¸€æ—¦çµ‚ã‚ã£ã¦ãã‚ŒãŸã®ãŒå¬‰ã—ã„ã§ã™â—Ž

# å­¦ç¿’æ™‚é–“

- 2æ™‚é–“30åˆ†(åˆè¨ˆ: 556æ™‚é–“15åˆ†)
