# 2025年10月22日(水)

# やったこと📝

- [プラクティス lsコマンドを作る3（Reスキル） \| FBC](https://bootcamp.fjord.jp/practices/324)

# わかったこと💡

## object#tap

> self を引数としてブロックを評価し、self を返します。
[Object\#tap \(Ruby 3\.4 リファレンスマニュアル\)](https://docs.ruby-lang.org/ja/latest/method/Object/i/tap.html)

:::details lsコマンドを作る3
```ruby
# 基本構文
tap {|x| ... } -> self

# 例文
(1..10)                  .tap {|x| puts "original: #{x}" }
  .to_a                  .tap {|x| puts "array:    #{x}" }
  .select {|x| x.even? } .tap {|x| puts "evens:    #{x}" }
  .map {|x| x*x }        .tap {|x| puts "squares:  #{x}" }

# Dir.globに使ってみると…
Dir.glob('*').tap { |array| array.reverse! if params[:r] }
```
前回のレビューにて、
条件分岐で`Dir.glob('*')が重複しているとご指摘いただいたので、無理やり一行にしようとselfを返す`tap`を使ってみたのですが、`tap`を使う意味があまり無さそうといえば無さそうなので、やめました！

最終的に合体させるとあったので、応用できそうな形にしようと思い、こんな感じにしてみました。

```ruby
# opt.on('-a') { params[:a] = true }
opt.on('-r') { params[:r] = true }
opt.parse(ARGV)

def fetch_dir_contents(params)
  file_list = Dir.glob('*')
  file_list.reverse! if params[:r]
  file_list
end
```

そういえばプルリクエストをクローズするのを忘れていたので閉じてローカルに反映させましたが、
前回の`-a`をどう残して`-r`を作成するかが悩みどころですね…
:::

## nginx で VirtualHost を使って 1 つのサーバーで複数のサイトを立ち上げる（Reスキル）
:::details VirtualHostを使う
# VirtualHostとは
1台のサーバーで複数のwebサイトを運営するための仕組みのこと。

### ネームサーバーとは
> ネームサーバーとは、インターネット通信時にドメイン名をIPアドレスに変換する名前解決を行うサーバーです。ネームサーバーはDNSサーバーと呼ばれることもあります。
> つまり、ネームサーバー＝DNSサーバーのことなのです。
https://www.idcf.jp/rentalserver/user-support/knowledge/domain/nameserver.html

ネームサーバーって何だと思っていましたが、DNSサーバーのことだったんですね！ITパスポートでよく見かけた名称なのでDNSサーバーって言われた方がわかりやすい！！


### Linuxのディレクトリ構造について
- 自分のユーザーのホームディレクトリにファイルを配置するのであればまだよいですが、そうでないのであれば /home の下にいろいろと置くのは適切ではないです。Linux のディレクトリ構造としてどこに置くのが適切なのかを考えてみましょう。

> /etc
> システム全体の設定ファイルが集約されています。ユーザー管理、ネットワーク設定、サービス設定などもここに含まれます。
https://zenn.dev/oit2003/articles/6d59b55e233307

とあるので、設定ファイルの配置は`/etc`ディレクトリ配下に置くことになるんでしょうか…
:::
# 次にやること✅

- [プラクティス lsコマンドを作る3（Reスキル） \| FBC](https://bootcamp.fjord.jp/practices/324)

# 今の気持ち🫶

とりあえず反映まで時間がかかるようなのでお名前.comとさくらのVPSにそれぞれ登録だけしました！できてるかはわからないですが…

# 学習時間

- 2時間30分(合計: 602時間30分)
