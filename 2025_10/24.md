# 2025年10月24日(金)

# やったこと📝

- [プラクティス lsコマンドを作る3（Reスキル） \| FBC](https://bootcamp.fjord.jp/practices/324)

# わかったこと💡
## lsコマンドを作る3
今日は課題を提出する日なので、`git push`した後に、プルリクエストの作成時にリポジトリの変更ミスが起こらないようURLから開きました。

```ruby
https://github.com/＜ユーザー名＞/＜リポジトリ名＞/compare/＜ベースブランチ＞...＜比較ブランチ＞
```
これで開くとファイルの変更部分も一目で見れるので便利ですし、急がば回れですね！

とりあえず提出できました！！！

## Virtual Hostについて

2種類あり、`Name-based`と`IP-based`に分けられる。
今回実装するのは、同じIPアドレスで複数のドメインを区別する`Name-based`のほう。

ドメインが1つのため、1つのサーバーブロック内に1つのドメインを指定すればOKなはず！
[【Nginx】独自ドメインを取得して、Virtual Hostを使ってみる](https://zenn.dev/nagan/articles/bd081222536f8e)

ちなみにドメイン名の登録が上手くいったかは、
```ruby
$ nslookup <ドメイン名>
```
で確認できます。

私もコマンドを実行してみたらなんか色々出てきたので、多分出来ているのでしょう！！
### サーバーブロック
`server{ ... }`の範囲内 に書かれている設定全体のこと。
```json
server {
    ...
}
```
↑これです。

:::details Virtual Hostで複数サイトを立ち上げる
## 1. ディレクトリを作成

多くの参考サイトでは、homeディレクトリ配下にドキュメントルートを作成していますが、

> 自分のユーザーのホームディレクトリにファイルを配置するのであればまだよいですが、そうでないのであれば /home の下にいろいろと置くのは適切ではないです。Linux のディレクトリ構造としてどこに置くのが適切なのかを考えてみましょう。

とあり、どうやらhomeディレクトリ配下に設置するのは適切ではない模様です。

理由として考えられるのは、`home`ディレクトリは、個人用ファイルの保管場所であり、アクセス制御が前提のプライベートな領域なので外部公開用ではないためではないかと推察します。

推奨されるディレクトリ構造はおそらく、`/var/www/`だと考えてここに作成します。

## ドキュメントルートとは
nginxがブラウザからのリクエストに応じて返すファイル等を置くディレクトリのこと。

## 2. 設定ファイルの作成
- 初期設定ファイル
  - `/etc/nginx/nginx.conf`にあり、サーバー全体の基本設定を行う。
- サイトごとの設定(ココ！)
  - 通常`/etc/nginx/sites-available/`配下に記載する。
  - 各ドメインごとにserverブロックを定義する。

[nginx でドメインのサイト立ち上げ\( VirtualHost \) \- Chiroru's Diary](https://chiroru-memo.hatenablog.com/entry/2020/03/08/212110)

## シンボリックリンクとは

- WindowのショートカットやmacOSのエイリアスのようなもので、`ln -s`コマンドを使って作成することができる。
- 実体を共有し、リンク元が消えても使用できるハードリンクとは異なり、元のファイルが削除されると壊れたリンクになるという特徴がある。

```ruby
ln -s <元のファイル> <リンク名>
```

nginxは設定を読み込む際、`/etc/nginx/sites-enabled/`ディレクトリの中にあるファイルを自動的に読み取るが、実際の設定ファイル本体は`/etc/nginx/sites-available/`に置くのが慣習だそうです。

ということは、sites-enabledディレクトリにsites-aveilableディレクトリ下で作成したファイルのシンボリックリンクを作成する必要があるということですね。
:::

# 次にやること✅

- [プラクティス lsコマンドを作る3（Reスキル） \| FBC](https://bootcamp.fjord.jp/practices/324)

# いまの気持ち🫶

とりあえずlsコマンド3の提出物が出せたので、今日のノルマはクリアしました👏
あとは、日報見にきてくださっている人たちの日報を見に行きたいと思います！

# 学習時間

- 2時間45分(合計: 608時間15分)
